# 만화로 쉽게 배우는 암호

## 암호의 기초

* 암호기술
통신(전송)에서 데이터의 위-변조를 방지하는 기술

* 기본 모델
송신자 ->(암호화)-> 인터넷 ->(복호화)-> 수신자

* 용어
1. 평문(Plain text): 보통의 글
2. 암호문(Cipher text): 암호화 된 글
3. 암호화(Encryption): 평문을 암호문으로 바꾸는 것
4. 복호(화)(Decryption): 암호문을 평문으로 바꾸는 것
5. 암호화키(Ek)(Encryption Key): 암호화에 사용되는 키(암호화 알고리즘에 사용 되는 데이터)
6. 복호(화)키(Dk)(Decryption Key): 복호(화)에 사용되는 키

## 고전적인 암호 기술
### 1. 시저암호
평문의 각 문자를 순서대로 n문자 옮겨 암호화 하는 알고리즘

n=3일때, ABCDE -> DEFGH

암호화키: n(숫자)

### 2. 환자식암호(=대입암호)
시저 함호를 복잡하게 해서, 각 문자마다 옮기는 숫자를 변화 시킨 것.
일정한 변환규칙 ∂(시그마)에 따라 평문을 암호문으로 암호화
이때, 각 문자를 1:1로 다른 문자에 대응시키는 것을 '단일환자암호'라고 함
-> 시저암호도 단일환자암호의 일종
암호화키: ∂

### 3. 다표식암호
평문을 n문자 씩 블록으로 나누고, 각 블록 안에서 <b>문자를 옮기는 수를 바꾸는</b> 알고리즘

예시)

n=4, delta={1st->2문자, 2nd->5문자, 3rd->3문자, 4th->1문자}

MOMOTARO -> MOMO/TARO -> OTPP/VFUP -> OTPPVFUP

암호화키: n, delta

### 4. 전치식 암호
평문을 n문자 씩 블록으로 나누고, 각 블록 안에서 <b>문자의 순서를 바꾸는</b> 알고리즘

예시)

n=4, tau={1st->2nd, 2nd->4th, 3rd->1st, 4th->3rd}

MOMOTARO -> MOMO/TARO -> MMOO/RTOA -> MMOORTOA

## 암호의 안전성
키의 수 = 암호 해독에 필요한 최대의 시행착오 수
=> 키의 수가 많은 수록 

### 시저암호의 키의 수
영어 알파벳 수 = 26 = 키의 total 수

-> 최대 26번의 시행착오면 해독 가능

### 환자식 암호의 키의 수
26개의 알파벳에 26개의 알파벳을 매칭 -> 26P26 순열의 경우의 수

1초에 1억개씩 탐색해도, 1280억년 소요 -> 계산적으로 안전한 암호 but, 빈도분석에는 약함

빈도분석 - 평문에 등장하는 문자의 출현빈도, 암호문에 등장하는 문자의 출현빈도가 일치하는 특징을 이용한 분석법

### 다표식암호의 키의 수
블록 내에서 1개의 문자가 이동 가능한 경우의 수 26

-> 블록크기가 n인 블록의 total 키의 수 = 26**n

-> n이 클수록 total 키의 수 증가

예시)

블록 크기가 4인 블록의 total 키의 수 = 26**4

### 전치식 암호의 키의 수
블록 크기가 n인 블록의 total 키의 수는 n!

-> n이 클수록 키의 total 수 증가 

### 해독이 가능해지는 조건
1. 암호화 알고리즘이 알려져 있는 경우
2. 치우침(문자의 출현률)과 같은 통계적 성질의 데이터가 있는 겅우
3. 암호화의 예문을 많이 가지고 있는 경우

* 암호문이 길수록 단서 증가 -> 해독 난이도 하락

### 절대 안전한 암호
이론상 해독 불가능한 암호
* 버넘암호: 평문에 길이가 같은 난수의 줄을 덧붙혀 암호문 C 만듦, 1회성 난수키를 이용하기 때문에 해독 불가능

암호화
1. 알파벳을 문자 코드로 전환 (M->12, O->14)
2. 1회만 사용하는 난수를 가산 (12+9 -> 21), 14+20 -> 34)
3. 26으로 나눈 나머지 계산 (21 -> 21, 34 -> 8)
4. 문자코드를 이용해 알파벳으로 변환 (21->V, 8-> I)

* 단점

키가 너무 길어서 효율이 떨어짐

### 안전한 암호
1. 절대 안전한 암호
2. <b>계산적으로 안전한 암호: 해독하는 데 채산이 맞지 않을 정도로 수고, 시간 소요.</b> (현대의 상용 암호에 사용됨)

## 공통키 암호화
=대칭키 암호(Common Key Cryptography), 비밀키 암호(Symmetric Key Cryptography)
* 암호화, 복호화에 같은 키를 사용하는 알고리즘
* 
0x : 16진수를 의미하는 기호

XOR을 이용해 암호화, 복호화 가능
1. 평문 XOR 암호키 = 암호문 (암호화)
2. 암호문 XOR 암호키 = 평문 (복호화)

노드들의 간선 수 만큼 암호키가 필요

(n개 노드일때, nC2개의 암호 키 필요)

특징
1. 키의 전송, 보관에 특히 유의해야 함
2. 계산량 적음 -> 고속의 암호화, 복호화 수행가능하기 때문에 대량의 데이터 통신에 적함
3. 다수와 통신시 대량의 키가 필요 -> 불특정 다수와의 통신에는 적합하지 않음

암호방식
1. 스트림암호(축차암호)
2. 블록암호

두 방식 모두 언젠가는 키를 찾을 수 있음

-> 계산적인 안전성보증만 가능

### 스트림 암호
축차적으로 암호화, 복호화 수행

평문 데이터와 키를 차례로 XOR 연산

키: 의사난수열(아무 의미 없는 수의 나열)

블록 암호에 비해 단순한 조작 -> 고속처리 가능

예시) RC4, SEAL

### 블록암호
일정한 길이의 블록마다 암호화

#### 블록, 키 길이
1. DES: 블록 길이: 64비트, 키의 길이: 64
2. AES: 블록 길이: 128비트, 키의 길이: 128, 192, 256

블럭이 가득 차지 않고 비어있는 경우 - 패딩(Padding)을 더해 블록길이에 맞춰줌. 이때, 패딩은 추가한 패딩 수를 값으로 가짐

* ECB(Electric Code Book) 모드

각 블록을 독립된 것으로 하여 개별적으로 암호화, 복호화 하는 방식

* CBC(Cipher Block Chaining) 모드

블록 단위 안에 중복된 데이터가 있을 때, 암호문에도 중복이 발생하는 문제 해결을 위한 방식

입력 or 출력 데이터의 일부 블록을 피드백 시켜 암호 강도 증대
